{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport axios from \"../../utils/axios\";\nimport { LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAIL, SOCIAL_LOGIN_SUCCESS, SOCIAL_LOGIN_FAIL, REGISTER_REQUEST, REGISTER_SUCCESS, REGISTER_FAIL, LOAD_USER_REQUEST, LOAD_USER_SUCCESS, LOAD_USER_FAIL, LOGOUT_SUCCESS, LOGOUT_FAIL, CLEAR_ERRORS } from \"../consts\";\nexport var login = function login(userData) {\n  return function _callee(dispatch) {\n    var config, _await$axios$post, _await$axios$post$dat, data, token, _error$response, _error$response$data;\n\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            dispatch({\n              type: LOGIN_REQUEST\n            });\n            config = {\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            };\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(axios.post('/api/v1/login', userData, config));\n\n          case 5:\n            _await$axios$post = _context.sent;\n            _await$axios$post$dat = _await$axios$post.data;\n            data = _await$axios$post$dat.data;\n            token = _await$axios$post$dat.token;\n            localStorage.setItem('token', token);\n            dispatch({\n              type: LOGIN_SUCCESS,\n              payload: data.user\n            });\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](0);\n            dispatch({\n              type: LOGIN_FAIL,\n              payload: _context.t0 == null ? void 0 : (_error$response = _context.t0.response) == null ? void 0 : (_error$response$data = _error$response.data) == null ? void 0 : _error$response$data.message\n            });\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 13]], Promise);\n  };\n};\nexport var socialLogin = function socialLogin() {\n  return function _callee2(dispatch) {\n    var config, _await$axios$get, _await$axios$get$data, id, displayName, emails, photos, provider, username, email, _await$axios$post2, _await$axios$post2$da, data, token, _error$response2, _error$response2$data;\n\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            config = {\n              headers: {\n                'Content-Type': 'application/json'\n              }\n            };\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(axios.get('/api/v1/auth/login/success', config));\n\n          case 4:\n            _await$axios$get = _context2.sent;\n            _await$axios$get$data = _await$axios$get.data.user;\n            id = _await$axios$get$data.id;\n            displayName = _await$axios$get$data.displayName;\n            emails = _await$axios$get$data.emails;\n            photos = _await$axios$get$data.photos;\n            provider = _await$axios$get$data.provider;\n            username = _await$axios$get$data.username;\n            if (provider === 'google') email = emails[0].value;\n            if (provider === 'twitter') email = username + \"@twitter.com\";\n            _context2.next = 16;\n            return _regeneratorRuntime.awrap(axios.get('/api/v1/auth/login/clear', config));\n\n          case 16:\n            _context2.next = 18;\n            return _regeneratorRuntime.awrap(axios.post('/api/v1/auth/saveUser', {\n              name: displayName,\n              email: email,\n              avatar: {\n                url: photos == null ? void 0 : photos[0].value\n              },\n              provider: provider,\n              socialId: id\n            }, config));\n\n          case 18:\n            _await$axios$post2 = _context2.sent;\n            _await$axios$post2$da = _await$axios$post2.data;\n            data = _await$axios$post2$da.data;\n            token = _await$axios$post2$da.token;\n            localStorage.setItem('token', token);\n            dispatch({\n              type: SOCIAL_LOGIN_SUCCESS,\n              payload: data.user\n            });\n            _context2.next = 29;\n            break;\n\n          case 26:\n            _context2.prev = 26;\n            _context2.t0 = _context2[\"catch\"](0);\n            dispatch({\n              type: SOCIAL_LOGIN_FAIL,\n              payload: _context2.t0 == null ? void 0 : (_error$response2 = _context2.t0.response) == null ? void 0 : (_error$response2$data = _error$response2.data) == null ? void 0 : _error$response2$data.message\n            });\n\n          case 29:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 26]], Promise);\n  };\n};\nexport var register = function register(userData) {\n  return function _callee3(dispatch) {\n    var config, _await$axios$post3, _await$axios$post3$da, data, token, _error$response3, _error$response3$data;\n\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            dispatch({\n              type: REGISTER_REQUEST\n            });\n            config = {\n              headers: {\n                'Content-Type': 'multipart/form-data'\n              }\n            };\n            _context3.next = 5;\n            return _regeneratorRuntime.awrap(axios.post('/api/v1/register', userData, config));\n\n          case 5:\n            _await$axios$post3 = _context3.sent;\n            _await$axios$post3$da = _await$axios$post3.data;\n            data = _await$axios$post3$da.data;\n            token = _await$axios$post3$da.token;\n            localStorage.setItem('token', token);\n            dispatch({\n              type: REGISTER_SUCCESS,\n              payload: data.user\n            });\n            _context3.next = 16;\n            break;\n\n          case 13:\n            _context3.prev = 13;\n            _context3.t0 = _context3[\"catch\"](0);\n            dispatch({\n              type: REGISTER_FAIL,\n              payload: _context3.t0 == null ? void 0 : (_error$response3 = _context3.t0.response) == null ? void 0 : (_error$response3$data = _error$response3.data) == null ? void 0 : _error$response3$data.message\n            });\n\n          case 16:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 13]], Promise);\n  };\n};\nexport var loadUser = function loadUser() {\n  return function _callee4(dispatch) {\n    var _await$axios$get2, data, _error$response4, _error$response4$data;\n\n    return _regeneratorRuntime.async(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            dispatch({\n              type: LOAD_USER_REQUEST\n            });\n            _context4.next = 4;\n            return _regeneratorRuntime.awrap(axios.get('/api/v1/profile'));\n\n          case 4:\n            _await$axios$get2 = _context4.sent;\n            data = _await$axios$get2.data.data;\n            dispatch({\n              type: LOAD_USER_SUCCESS,\n              payload: data.user\n            });\n            _context4.next = 12;\n            break;\n\n          case 9:\n            _context4.prev = 9;\n            _context4.t0 = _context4[\"catch\"](0);\n            dispatch({\n              type: LOAD_USER_FAIL,\n              payload: _context4.t0 == null ? void 0 : (_error$response4 = _context4.t0.response) == null ? void 0 : (_error$response4$data = _error$response4.data) == null ? void 0 : _error$response4$data.message\n            });\n\n          case 12:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n};\nexport var logout = function logout() {\n  return function (dispatch) {\n    try {\n      localStorage.removeItem('token');\n      dispatch({\n        type: LOGOUT_SUCCESS\n      });\n    } catch (error) {\n      var _error$response5, _error$response5$data;\n\n      dispatch({\n        type: LOGOUT_FAIL,\n        payload: error == null ? void 0 : (_error$response5 = error.response) == null ? void 0 : (_error$response5$data = _error$response5.data) == null ? void 0 : _error$response5$data.message\n      });\n    }\n  };\n};\nexport var clearErrors = function clearErrors() {\n  return {\n    type: CLEAR_ERRORS\n  };\n};","map":{"version":3,"names":["axios","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAIL","SOCIAL_LOGIN_SUCCESS","SOCIAL_LOGIN_FAIL","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAIL","LOAD_USER_REQUEST","LOAD_USER_SUCCESS","LOAD_USER_FAIL","LOGOUT_SUCCESS","LOGOUT_FAIL","CLEAR_ERRORS","login","userData","dispatch","type","config","headers","post","data","token","localStorage","setItem","payload","user","response","message","socialLogin","get","id","displayName","emails","photos","provider","username","email","value","name","avatar","url","socialId","register","loadUser","logout","removeItem","error","clearErrors"],"sources":["C:/Users/DANIALSYED/OneDrive/Documents/GitHub/PriceGetterNative/redux/actions/authActions.js"],"sourcesContent":["import axios from '../../utils/axios';\r\n\r\nimport {\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAIL,\r\n  SOCIAL_LOGIN_SUCCESS,\r\n  SOCIAL_LOGIN_FAIL,\r\n  REGISTER_REQUEST,\r\n  REGISTER_SUCCESS,\r\n  REGISTER_FAIL,\r\n  LOAD_USER_REQUEST,\r\n  LOAD_USER_SUCCESS,\r\n  LOAD_USER_FAIL,\r\n  LOGOUT_SUCCESS,\r\n  LOGOUT_FAIL,\r\n  CLEAR_ERRORS,\r\n} from '../consts';\r\n\r\nexport const login = userData => async dispatch => {\r\n  try {\r\n    dispatch({\r\n      type: LOGIN_REQUEST,\r\n    });\r\n\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    };\r\n\r\n    const {\r\n      data: { data, token },\r\n    } = await axios.post('/api/v1/login', userData, config);\r\n\r\n    localStorage.setItem('token', token);\r\n\r\n    dispatch({\r\n      type: LOGIN_SUCCESS,\r\n      payload: data.user,\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: LOGIN_FAIL,\r\n      payload: error?.response?.data?.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const socialLogin = () => async dispatch => {\r\n  try {\r\n    const config = { headers: { 'Content-Type': 'application/json' } };\r\n\r\n    const {\r\n      data: {\r\n        user: { id, displayName, emails, photos, provider, username },\r\n      },\r\n    } = await axios.get('/api/v1/auth/login/success', config);\r\n\r\n    let email;\r\n    if (provider === 'google') email = emails[0].value;\r\n    if (provider === 'twitter') email = `${username}@twitter.com`;\r\n\r\n    await axios.get('/api/v1/auth/login/clear', config);\r\n\r\n    const {\r\n      data: { data, token },\r\n    } = await axios.post(\r\n      '/api/v1/auth/saveUser',\r\n      {\r\n        name: displayName,\r\n        email,\r\n        avatar: { url: photos?.[0].value },\r\n        provider,\r\n        socialId: id,\r\n      },\r\n      config\r\n    );\r\n\r\n    localStorage.setItem('token', token);\r\n\r\n    dispatch({\r\n      type: SOCIAL_LOGIN_SUCCESS,\r\n      payload: data.user,\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: SOCIAL_LOGIN_FAIL,\r\n      payload: error?.response?.data?.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const register = userData => async dispatch => {\r\n  try {\r\n    dispatch({\r\n      type: REGISTER_REQUEST,\r\n    });\r\n\r\n    const config = { headers: { 'Content-Type': 'multipart/form-data' } };\r\n\r\n    const {\r\n      data: { data, token },\r\n    } = await axios.post('/api/v1/register', userData, config);\r\n\r\n    localStorage.setItem('token', token);\r\n\r\n    dispatch({\r\n      type: REGISTER_SUCCESS,\r\n      payload: data.user,\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: REGISTER_FAIL,\r\n      payload: error?.response?.data?.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const loadUser = () => async dispatch => {\r\n  try {\r\n    dispatch({\r\n      type: LOAD_USER_REQUEST,\r\n    });\r\n\r\n    const {\r\n      data: { data },\r\n    } = await axios.get('/api/v1/profile');\r\n\r\n    dispatch({\r\n      type: LOAD_USER_SUCCESS,\r\n      payload: data.user,\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: LOAD_USER_FAIL,\r\n      payload: error?.response?.data?.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const logout = () => dispatch => {\r\n  try {\r\n    // await axios.post('/api/v1/logout');\r\n    localStorage.removeItem('token');\r\n\r\n    dispatch({\r\n      type: LOGOUT_SUCCESS,\r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: LOGOUT_FAIL,\r\n      payload: error?.response?.data?.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const clearErrors = () => ({ type: CLEAR_ERRORS });\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}